## Code Scanner

Comprehensive static code analysis to identify potential issues, vulnerabilities, and areas for improvement in your codebase.

### Key Features:

1. **Static Analysis**: The feature performs in-depth analysis of your code to identify potential issues, vulnerabilities, and areas for improvement.

2. **Multi-language Support**: Code Scanner can analyze code in various programming languages and frameworks.

3. **Detailed Reporting**: Generates comprehensive reports highlighting issues, potential bugs, and suggestions for improvement.

4. **Security Vulnerability Detection**: Identifies potential security vulnerabilities in the codebase.

5. **Code Quality Metrics**: Provides metrics and insights on code quality and maintainability.

## Usage Guide:

Here's a detailed step-by-step guide on how to use the Code Scanner:

1. Create and activate a virtual environment:

   **Mac/Linux**

   ```bash
   python3 -m venv venv
   source venv/bin/activate
   ```

   **Windows**

   ```bash
   python -m venv venv
   .\venv\Scripts\activate
   ```

2. Install poetry and Kaizen:

   ```bash
   pip install poetry kaizen-cloudcode
   ```
3. Create a new Python file and import the necessary modules from Kaizen:

   ```python
    from kaizen.reviewer.code_scan import CodeScanner
    from kaizen.llms.provider import LLMProvider
    import json
   ```

4. Create an instance of the CodeScanner:  


   ```python
   reviewer = CodeScanner(llm_provider=LLMProvider())
   ```

5. Provide the source code file or directory path which you want to scan: 

   You can scan a single file at a time:

   ```python
    filename = "path/to/your/file.py"
    with open(filename, "r+") as f:
        file_data = f.read()
    review_data = reviewer.review_code(file_data=file_data, user="YourUsername/ProjectName")
   ```

   Or a whole directory:

   ```python
    dir_path = "path/to/your/directory/"
    review_data = reviewer.review_code_dir(
        dir_path=dir_path, reevaluate=True, user="YourUsername/ProjectName"
    )
   ```

6. Display the test results:

   ```python
    print(f"Total {len(review_data.issues)} Issues found!!!!")
    print(json.dumps(review_data.issues, indent=2))
   ```
8. Review the generated report and address the identified issues in your code.

### Example:

Here's a complete example to generate unit tests for a specific file:

```python
    from kaizen.reviewer.code_scan import CodeScanner
    from kaizen.llms.provider import LLMProvider
    import json

    # Create an instance of the CodeScanner
    reviewer = CodeScanner(llm_provider=LLMProvider())

    # Scan a single file
    filename = "github_app/main.py"
    with open(filename, "r+") as f:
        file_data = f.read()
    review_data = reviewer.review_code(file_data=file_data, user="Example/CodeScan")

    # Scan a whole directory
    dir_path = "github_app/"
    review_data = reviewer.review_code_dir(
        dir_path=dir_path, reevaluate=True, user="Example/CodeScan"
    )

    # Display the results
    print(f"Total {len(review_data.issues)} Issues found!!!!")
    print(json.dumps(review_data.issues, indent=2))
```

### Supported Languages:

- All programming languages

## How it Works:

- Input your source code or provide access to your repository.
- The Code Scanner employs advanced algorithms and AI to analyze the code and generate a detailed report of findings.
- The scanner identifies potential issues, vulnerabilities, and areas for improvement in your codebase.

![Code Scan Analysis Workflow](/code_scan_analysis_workflow.png.)

You can find an example [here](https://github.com/Cloud-Code-AI/kaizen/tree/main/examples/code_scan/main.py)

## API Reference:

### Class: CodeScanner  

#### Constructor

- `__init__(self, llm_provider: LLMProvider)`
  Initializes the CodeScanner with the provided LLM provider.

#### Methods

##### review_code

- `review_code(self, file_data: str, user: str) -> ReviewData`
  Performs a code review on a single file.
  - Parameters:
    - `file_data`: Content of the file to be reviewed.
    - `user`: Username or project identifier.
  - Returns: ReviewData object containing the review results.

##### review_code_dir

- `review_code_dir(self, dir_path: str, reevaluate: bool = False, user: str) -> ReviewData`
  Performs a code review on all files in a directory.
  - Parameters:
    - `dir_path`: Path to the directory containing the files to be reviewed.
    - `reevaluate`: Whether to reevaluate previously scanned files.
    - `user`: Username or project identifier.
  - Returns: ReviewData object containing the review results for all files.

## Benefits:

- Early Bug Detection
- Security Vulnerability Identification
- Code Quality Improvement
- Coding Standard Enforcement
- Technical Debt Reduction

## Limitations:

- False Positives: Some identified issues may not be actual problems in certain contexts.
- Language Coverage: Effectiveness may vary depending on programming language and framework.
- AI Limitations: May not catch all possible issues or understand complex project-specific requirements.