[
  {
    "category": "Security",
    "description": "Hardcoded API keys in config.json",
    "impact": "critical",
    "rationale": "Hardcoding API keys can lead to security vulnerabilities if the code is shared or exposed. It is a best practice to use environment variables for sensitive information.",
    "recommendation": "Replace hardcoded API keys with environment variables.",
    "current_code": "\"api_key\": \"os.environ/AZURE_API_KEY\"",
    "suggested_code": "\"api_key\": \"${AZURE_API_KEY}\"",
    "file_path": "config.json",
    "start_line": 13,
    "end_line": 23,
    "change_type": "modification",
    "sentiment": "negative",
    "severity": 9
  },
  {
    "category": "Security",
    "description": "Potential SQL injection vulnerability in `store_abstraction_and_embedding` method.",
    "impact": "critical",
    "rationale": "Directly inserting user input into SQL queries can lead to SQL injection attacks.",
    "recommendation": "Use parameterized queries to prevent SQL injection.",
    "current_code": "embedding_query = text(\n    \"\"\"\n    INSERT INTO function_embeddings (function_id, vector)\n    VALUES (:function_id, :vector)\n    ON CONFLICT (function_id) DO UPDATE SET vector = EXCLUDED.vector\n    \"\"\"\n)",
    "suggested_code": "embedding_query = text(\n    \"\"\"\n    INSERT INTO function_embeddings (function_id, vector)\n    VALUES (:function_id, :vector)\n    ON CONFLICT (function_id) DO UPDATE SET vector = EXCLUDED.vector\n    \"\"\"\n).bindparams(function_id=function_id, vector=embedding)",
    "file_path": "kaizen/retriever/llama_index_retriever.py",
    "start_line": 158,
    "end_line": 163,
    "change_type": "modification",
    "sentiment": "negative",
    "severity": 9
  },
  {
    "category": "Configuration",
    "description": "Changes made to sensitive file",
    "impact": "critical",
    "recommendation": "Changes were made to config.json, which needs review",
    "current_code": "NA",
    "fixed_code": "",
    "start_line": "4",
    "end_line": "4",
    "side": "RIGHT",
    "file_path": "config.json",
    "sentiment": "negative",
    "severity": 10
  },
  {
    "category": "Docker",
    "description": "Changes made to sensitive file",
    "impact": "critical",
    "recommendation": "Changes were made to Dockerfile, which needs review",
    "current_code": "NA",
    "fixed_code": "",
    "start_line": "4",
    "end_line": "4",
    "side": "RIGHT",
    "file_path": "Dockerfile",
    "sentiment": "negative",
    "severity": 10
  },
  {
    "category": "Docker",
    "description": "Changes made to sensitive file",
    "impact": "critical",
    "recommendation": "Changes were made to docker-compose.yml, which needs review",
    "current_code": "NA",
    "fixed_code": "",
    "start_line": "15",
    "end_line": "15",
    "side": "RIGHT",
    "file_path": "docker-compose.yml",
    "sentiment": "negative",
    "severity": 10
  },
  {
    "category": "Version Control",
    "description": "Changes made to sensitive file",
    "impact": "critical",
    "recommendation": "Changes were made to .gitignore, which needs review",
    "current_code": "NA",
    "fixed_code": "",
    "start_line": "164",
    "end_line": "164",
    "side": "RIGHT",
    "file_path": ".gitignore",
    "sentiment": "negative",
    "severity": 10
  },
  {
    "category": "Database",
    "description": "Changes made to sensitive file",
    "impact": "critical",
    "recommendation": "Changes were made to db_setup/init.sql, which needs review",
    "current_code": "NA",
    "fixed_code": "",
    "start_line": "1",
    "end_line": "1",
    "side": "RIGHT",
    "file_path": "db_setup/init.sql",
    "sentiment": "negative",
    "severity": 10
  }
]